<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <meta name="theme-color" content="#061b14"/>
  <title>DIGIY HUB ‚àû ‚Äî Tour de Contr√¥le</title>
  <meta name="description" content="DIGIY HUB ‚Äî Portail central DIGIYLYFE. Acc√®s modules, espaces DIGIY & PRO. 0% commission. Paiement direct." />

  <!-- (Optionnel) Guard DIGIY ‚Äî si tu l‚Äôas dans le repo du HUB -->
  <!-- <script src="./guard.js?v=hub-final-1"></script> -->

  <style>
    :root{
      --bg:#061b14;
      --card:#0b2a1f;
      --card2:#0a241b;
      --line:rgba(255,255,255,.12);
      --ink:#eafff1;
      --muted:rgba(234,255,241,.70);
      --gold:#facc15;
      --green:#22c55e;
      --orange:#f97316;
      --red:#fb7185;
      --shadow:0 14px 40px rgba(0,0,0,.35);
      --r:18px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; color:var(--ink);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background:
        radial-gradient(1200px 600px at 15% -10%, rgba(250,204,21,.12), transparent 55%),
        radial-gradient(900px 520px at 95% 10%, rgba(34,197,94,.10), transparent 55%),
        linear-gradient(180deg, #04120d, var(--bg));
    }
    a{color:inherit}

    .wrap{max-width:1140px;margin:0 auto;padding:18px 14px 110px}
    header{
      display:flex; gap:14px; align-items:center; justify-content:space-between;
      padding:14px 14px; margin-top:10px;
      border:1px solid var(--line); border-radius:var(--r);
      background:rgba(11,42,31,.78);
      box-shadow:var(--shadow);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
    .brand{display:flex; gap:12px; align-items:center}
    .logo{
      width:46px; height:46px; border-radius:14px;
      display:grid; place-items:center;
      border:1px solid rgba(250,204,21,.25);
      background:linear-gradient(135deg, rgba(250,204,21,.18), rgba(34,197,94,.10));
      box-shadow:0 12px 30px rgba(0,0,0,.25);
      font-size:20px;
    }
    .title{line-height:1.1}
    .title h1{margin:0;font-size:16px; letter-spacing:.2px}
    .title p{margin:4px 0 0; font-size:12px; color:var(--muted)}
    .ctx{
      display:flex; flex-wrap:wrap; gap:8px; justify-content:flex-end; text-align:right;
    }
    .pill{
      display:inline-flex; align-items:center; gap:8px;
      padding:8px 10px; border-radius:999px;
      border:1px solid var(--line);
      background:rgba(6,27,20,.55);
      font-size:12px; color:var(--muted);
      white-space:nowrap;
    }
    .pill b{color:var(--ink); font-weight:800}
    .btn{
      display:inline-flex; align-items:center; justify-content:center; gap:10px;
      padding:10px 12px; border-radius:14px;
      border:1px solid var(--line);
      background:rgba(11,42,31,.92);
      text-decoration:none;
      font-weight:850;
      box-shadow:0 14px 40px rgba(0,0,0,.30);
    }
    .btn:hover{transform: translateY(-1px)}
    .btn:active{transform: translateY(0px)}
    .btn.primary{border-color: rgba(250,204,21,.45)}
    .btn.small{padding:8px 10px; font-size:12px; font-weight:800}
    .btn.ghost{background:rgba(6,27,20,.35)}
    .btn .tag{opacity:.75; font-weight:800; font-size:12px}

    .grid2{display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-top:12px}
    @media (max-width:920px){ .grid2{grid-template-columns:1fr} }

    .panel{
      border:1px solid var(--line);
      border-radius:var(--r);
      background:rgba(11,42,31,.70);
      box-shadow:var(--shadow);
      overflow:hidden;
    }
    .panel-hd{
      padding:14px 14px;
      display:flex; align-items:flex-start; justify-content:space-between; gap:10px;
      border-bottom:1px solid var(--line);
      background:linear-gradient(180deg, rgba(250,204,21,.07), transparent);
    }
    .panel-hd h2{margin:0; font-size:14px}
    .panel-hd p{margin:6px 0 0; font-size:12px; color:var(--muted)}
    .panel-bd{padding:14px}

    .tabs{
      display:flex; gap:8px; flex-wrap:wrap;
      margin:14px 0 0;
    }
    .tab{
      border:1px solid var(--line);
      background:rgba(6,27,20,.45);
      color:var(--ink);
      padding:10px 12px;
      border-radius:999px;
      font-weight:900;
      cursor:pointer;
      user-select:none;
      font-size:12px;
    }
    .tab[aria-selected="true"]{
      border-color: rgba(250,204,21,.45);
      background:rgba(250,204,21,.10);
    }

    .section{margin-top:12px}
    .section h3{
      margin:14px 0 8px;
      font-size:12px;
      color:rgba(234,255,241,.88);
      letter-spacing:.3px;
      text-transform:uppercase;
    }

    .cards{
      display:grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap:10px;
    }
    @media (max-width:920px){ .cards{grid-template-columns: repeat(2, minmax(0, 1fr));} }
    @media (max-width:560px){ .cards{grid-template-columns: 1fr;} }

    .card{
      border:1px solid var(--line);
      border-radius:16px;
      background:rgba(10,36,27,.65);
      padding:12px;
      display:flex; flex-direction:column; gap:10px;
      min-height:120px;
    }
    .card .top{display:flex; align-items:flex-start; justify-content:space-between; gap:10px}
    .card .name{font-weight:950; letter-spacing:.2px}
    .card .desc{font-size:12px; color:var(--muted); line-height:1.35}
    .badge{
      display:inline-flex; align-items:center; justify-content:center;
      padding:6px 10px;
      border-radius:999px;
      font-size:11px;
      font-weight:900;
      border:1px solid var(--line);
      color:var(--muted);
      background:rgba(6,27,20,.45);
      white-space:nowrap;
    }
    .badge.ok{border-color: rgba(34,197,94,.35); color: rgba(234,255,241,.9)}
    .badge.soon{border-color: rgba(249,115,22,.35); color: rgba(234,255,241,.9)}
    .badge.lock{border-color: rgba(251,113,133,.35); color: rgba(234,255,241,.9)}
    .card .actions{margin-top:auto; display:flex; gap:8px; flex-wrap:wrap}
    .muteline{height:1px; background:var(--line); margin:12px 0}

    /* ‚úÖ Boutons flottants PRINCIPAUX */
    .digiy-fabs{
      position:fixed; right:14px; bottom:14px;
      display:flex; flex-direction:column; gap:10px;
      z-index:9999;
    }
    .digiy-fab{
      display:flex; align-items:center; justify-content:center;
      padding:12px 14px;
      border-radius:16px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(11,42,31,.92);
      color:var(--ink);
      text-decoration:none;
      font-weight:950;
      letter-spacing:.2px;
      box-shadow:var(--shadow);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      min-width:210px;
    }
    .digiy-fab small{opacity:.75; font-weight:850; margin-left:8px}
    .digiy-fab.primary{border-color: rgba(250,204,21,.45)}
    .digiy-fab.primary::before{content:"üí≥"; margin-right:10px}
    .digiy-fab.pricing::before{content:"üè∑Ô∏è"; margin-right:10px}
    .digiy-fab.ndimbal::before{content:"ü§ù"; margin-right:10px}

    @media (max-width:520px){
      .wrap{padding-bottom:130px}
      .digiy-fabs{
        right:10px; left:10px; bottom:10px;
        flex-direction:row; gap:10px;
        justify-content:space-between;
      }
      .digiy-fab{min-width:0; flex:1; padding:12px 10px; border-radius:18px}
      .digiy-fab small{display:none}
    }

    /* Footer mini */
    footer{
      margin-top:14px;
      text-align:center;
      color:var(--muted);
      font-size:12px;
      padding:12px 8px;
    }
    .kicker{color:rgba(250,204,21,.9); font-weight:900}
  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo">ü¶Ö</div>
        <div class="title">
          <h1>DIGIY HUB ‚àû</h1>
          <p>Tour de contr√¥le ‚Äî modules + espaces ‚Äî 0% commission</p>
        </div>
      </div>

      <div class="ctx" id="ctxBox">
        <div class="pill">üì± <b id="ctxPhone">‚Äî</b></div>
        <div class="pill">üè∑Ô∏è <b id="ctxSlug">‚Äî</b></div>
        <a class="btn small ghost" id="btnShare" href="#" title="Copier le lien avec contexte">üîó <span class="tag">Partager</span></a>
      </div>
    </header>

    <div class="tabs" role="tablist" aria-label="Espaces">
      <div class="tab" id="tabDigiy" role="tab" aria-selected="true">Espace DIGIY</div>
      <div class="tab" id="tabPro" role="tab" aria-selected="false">Espace PRO</div>
    </div>

    <!-- ‚úÖ Espace DIGIY -->
    <div class="grid2" id="spaceDigiy">
      <div class="panel">
        <div class="panel-hd">
          <div>
            <h2>Mon espace DIGIY</h2>
            <p>Profil, wallet, historique, r√©glages ‚Äî c√¥t√© peuple.</p>
          </div>
          <a class="btn small" data-link="mon_espace_digiy" href="#">üë§ <span class="tag">Ouvrir</span></a>
        </div>
        <div class="panel-bd">
          <div class="section">
            <h3>Market & Annonces</h3>
            <div class="cards" id="cardsDigiyMarket"></div>
          </div>
          <div class="muteline"></div>
          <div class="section">
            <h3>Terrain & Solidarit√©</h3>
            <div class="cards" id="cardsDigiyTerrain"></div>
          </div>
        </div>
      </div>

      <div class="panel">
        <div class="panel-hd">
          <div>
            <h2>Vas chez DIGIY</h2>
            <p>Orientation, support, guides, portes d‚Äôentr√©e.</p>
          </div>
          <a class="btn small" data-link="vas_chez_digiy" href="#">üß≠ <span class="tag">Entrer</span></a>
        </div>
        <div class="panel-bd">
          <div class="section">
            <h3>Explore & Map</h3>
            <div class="cards" id="cardsDigiyExplore"></div>
          </div>
          <div class="muteline"></div>
          <div class="section">
            <h3>Services & Transport</h3>
            <div class="cards" id="cardsDigiyTransport"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- ‚úÖ Espace PRO -->
    <div class="grid2" id="spacePro" style="display:none">
      <div class="panel">
        <div class="panel-hd">
          <div>
            <h2>Mon espace PRO</h2>
            <p>Cockpit business : modules actifs, √©quipes, factures.</p>
          </div>
          <a class="btn small primary" data-link="mon_espace_pro" href="#">üß∞ <span class="tag">Cockpit</span></a>
        </div>
        <div class="panel-bd">
          <div class="section">
            <h3>Terrain & Business</h3>
            <div class="cards" id="cardsProTerrain"></div>
          </div>
          <div class="muteline"></div>
          <div class="section">
            <h3>Market / Visibilit√©</h3>
            <div class="cards" id="cardsProMarket"></div>
          </div>
        </div>
      </div>

      <div class="panel">
        <div class="panel-hd">
          <div>
            <h2>Inscription PRO</h2>
            <p>Cr√©er ton espace business, activer tes modules, commencer.</p>
          </div>
          <a class="btn small" data-link="inscription_pro" href="#">üìù <span class="tag">S‚Äôinscrire</span></a>
        </div>
        <div class="panel-bd">
          <div class="section">
            <h3>Docs & Notes (Notable)</h3>
            <div class="cards" id="cardsProDocs"></div>
          </div>
          <div class="muteline"></div>
          <div class="section">
            <h3>Modules PRO (√©cosyst√®me)</h3>
            <div class="cards" id="cardsProEcosys"></div>
          </div>
        </div>
      </div>
    </div>

    <footer>
      <span class="kicker">DIGIYLYFE ‚àû</span> ‚Äî souverainet√© num√©rique, terrain d‚Äôabord. <br/>
      <span id="footerCtx"></span>
    </footer>
  </div>

  <!-- ‚úÖ Boutons flottants PRINCIPAUX -->
  <div class="digiy-fabs" id="digiyFabs">
    <a class="digiy-fab primary" id="fabPay" href="#" aria-label="Commencer √† payer">
      Commencer √† payer <small>Wave / QR</small>
    </a>
    <a class="digiy-fab pricing" id="fabTarifs" href="#" aria-label="Tarif DIGIY">
      Tarif DIGIY <small>Packs</small>
    </a>
    <a class="digiy-fab ndimbal" id="fabNdimbal" href="#" aria-label="NDIMBAL">
      NDIMBAL <small>Map</small>
    </a>
  </div>

  <script>
  (function(){
    // =========================
    // ‚úÖ CONFIG (MODIFIE ICI)
    // =========================
    const CONFIG = {
      // Tes pages principales
      urls: {
        commencer_a_payer: "https://beauville.github.io/commencer-a-payer/",
        tarif_digiy:       "https://beauville.github.io/tarif-digiy/",
        ndimbal:           "https://beauville.github.io/ndimbal-map/",
        vas_chez_digiy:    "https://beauville.github.io/digiy/",
        mon_espace_digiy:  "https://beauville.github.io/mon-espace-digiy/",
        mon_espace_pro:    "https://beauville.github.io/mon-espace-pro/",
        inscription_pro:   "https://beauville.github.io/inscription-pro/"
      },

      // Cartes (tu peux pointer vers des repos/pages existants)
      // status: "ok" | "soon" | "lock"
      cards: {
        // ESPACE DIGIY
        digiy_market: [
          { key:"bonne_affaire", name:"BONNE AFFAIRE", desc:"Petites annonces ‚Ä¢ occasions ‚Ä¢ direct.", status:"ok",   href:"https://beauville.github.io/digiy-bonne-affaire/" },
          { key:"market",        name:"MARKET",        desc:"Achat/vente local ‚Ä¢ direct ‚Ä¢ sans abus.", status:"soon", href:"https://beauville.github.io/digiy-market/" }
        ],
        digiy_terrain: [
          { key:"ndimbal", name:"NDIMBAL", desc:"Entraide ‚Ä¢ solidarit√© ‚Ä¢ terrain.", status:"ok", href:"https://beauville.github.io/ndimbal/" },
          { key:"ndimbal_map", name:"NDIMBAL MAP", desc:"Carte solidarit√© ‚Ä¢ bons plans ‚Ä¢ points.", status:"ok", href:"https://beauville.github.io/ndimbal-map/" }
        ],
        digiy_explore: [
          { key:"explore", name:"EXPLORE", desc:"D√©couvrir l‚ÄôAfrique ‚Ä¢ guides ‚Ä¢ visibilit√©.", status:"ok", href:"https://beauville.github.io/digiy-explore/" }
        ],
        digiy_transport: [
          { key:"fret_client", name:"FRET CLIENT", desc:"Suivi ‚Ä¢ paiement ‚Ä¢ r√©ception (c√¥t√© client).", status:"soon", href:"https://beauville.github.io/digiy-fret-client/" }
        ],

        // ESPACE PRO
        pro_terrain: [
          { key:"caisse_pro", name:"CAISSE PRO", desc:"Encaissement ‚Ä¢ tickets ‚Ä¢ cl√¥ture.", status:"soon", href:"https://beauville.github.io/digiy-caisse-pro/" },
          { key:"resa",      name:"RESA",      desc:"R√©servations ‚Ä¢ planning ‚Ä¢ confirmations.", status:"ok", href:"https://beauville.github.io/digiy-resa/" },
          { key:"fret",      name:"FRET",      desc:"Transport marchandises (c√¥t√© PRO).", status:"soon", href:"https://beauville.github.io/digiy-fret/" }
        ],
        pro_market: [
          { key:"market_pro", name:"MARKET PRO", desc:"Vendre ‚Ä¢ livrer ‚Ä¢ direct pro.", status:"soon", href:"https://beauville.github.io/digiy-market-pro/" },
          { key:"explore_pro", name:"EXPLORE PRO", desc:"Boost visibilit√© ‚Ä¢ apporteurs d‚Äôaffaires.", status:"ok", href:"https://beauville.github.io/digiy-explore-pro/" }
        ],
        pro_docs: [
          { key:"notable", name:"NOTABLE", desc:"Notes ‚Ä¢ fiches terrain ‚Ä¢ proc√©dures.", status:"soon", href:"https://beauville.github.io/digiy-notable/" }
        ],
        pro_ecosys: [
          { key:"loc_pro",    name:"LOC PRO",    desc:"Location directe ‚Ä¢ 0% commission.", status:"ok",   href:"https://beauville.github.io/digiy-loc-pro/" },
          { key:"pay_pro",    name:"PAY PRO",    desc:"Paiements ‚Ä¢ QR ‚Ä¢ Wallet pro.", status:"ok", href:"https://beauville.github.io/digiy-pay-pro/" },
          { key:"jobs",       name:"JOBS",       desc:"Emploi ‚Ä¢ dossiers ‚Ä¢ accompagnement.", status:"ok", href:"https://beauville.github.io/digiy-jobs/" },
          { key:"driver",     name:"DRIVER",     desc:"VTC ‚Ä¢ transport ‚Ä¢ direct.", status:"soon", href:"https://beauville.github.io/digiy-driver-pro/" },
          { key:"build",      name:"BUILD",      desc:"Artisans ‚Ä¢ chantiers ‚Ä¢ devis.", status:"ok", href:"https://beauville.github.io/digiy-build/" },
          { key:"store_pro",  name:"STORE PRO",  desc:"Boutique ‚Ä¢ stock ‚Ä¢ caisse.", status:"soon", href:"https://beauville.github.io/digiy-store-pro/" }
        ]
      }
    };

    // =========================
    // ‚úÖ CONTEXTE (slug/phone/token)
    // =========================
    const pageUrl = new URL(location.href);
    const ctx = {
      phone: (pageUrl.searchParams.get("phone") || "").trim(),
      slug:  (pageUrl.searchParams.get("slug")  || "").trim(),
      token: (pageUrl.searchParams.get("token") || "").trim()
    };

    const elPhone = document.getElementById("ctxPhone");
    const elSlug  = document.getElementById("ctxSlug");
    elPhone.textContent = ctx.phone || "‚Äî";
    elSlug.textContent  = ctx.slug  || "‚Äî";
    document.getElementById("footerCtx").textContent =
      (ctx.phone || ctx.slug) ? `Contexte: ${ctx.phone || "‚Äî"} ‚Ä¢ ${ctx.slug || "‚Äî"}` : "Sans contexte (OK pour vitrine).";

    function withCtx(base){
      const u = new URL(base, location.origin);
      if (ctx.phone) u.searchParams.set("phone", ctx.phone);
      if (ctx.slug)  u.searchParams.set("slug", ctx.slug);
      if (ctx.token) u.searchParams.set("token", ctx.token);
      return u.toString();
    }

    // Boutons header quick links (data-link)
    document.querySelectorAll("[data-link]").forEach(a=>{
      const k = a.getAttribute("data-link");
      if (CONFIG.urls[k]) a.href = withCtx(CONFIG.urls[k]);
    });

    // Boutons flottants
    document.getElementById("fabPay").href     = withCtx(CONFIG.urls.commencer_a_payer);
    document.getElementById("fabTarifs").href  = withCtx(CONFIG.urls.tarif_digiy);
    document.getElementById("fabNdimbal").href = withCtx(CONFIG.urls.ndimbal);

    // Partage (copie lien)
    document.getElementById("btnShare").addEventListener("click", async (e)=>{
      e.preventDefault();
      try{
        await navigator.clipboard.writeText(location.href);
        e.target.closest("a").innerHTML = "‚úÖ <span class='tag'>Copi√©</span>";
        setTimeout(()=>{ e.target.closest("a").innerHTML = "üîó <span class='tag'>Partager</span>"; }, 1200);
      }catch(_){
        alert("Copie impossible. Tu peux copier l‚ÄôURL √† la main.");
      }
    });

    // =========================
    // ‚úÖ RENDER CARTES
    // =========================
    function badgeHtml(status){
      if(status === "ok")   return `<span class="badge ok">‚úÖ actif</span>`;
      if(status === "lock") return `<span class="badge lock">üîí pro</span>`;
      return `<span class="badge soon">‚è≥ bient√¥t</span>`;
    }

    function cardHtml(c){
      const href = withCtx(c.href || "#");
      const disabled = (c.status === "soon") ? "data-disabled='1'" : "";
      const btnLabel = (c.status === "soon") ? "Voir" : "Ouvrir";
      return `
        <div class="card">
          <div class="top">
            <div class="name">${c.name}</div>
            ${badgeHtml(c.status)}
          </div>
          <div class="desc">${c.desc || ""}</div>
          <div class="actions">
            <a class="btn small ${c.status==="ok" ? "primary" : "ghost"}" href="${href}" ${disabled}>‚û°Ô∏è <span class="tag">${btnLabel}</span></a>
          </div>
        </div>
      `;
    }

    function render(list, targetId){
      const el = document.getElementById(targetId);
      if(!el) return;
      el.innerHTML = (list || []).map(cardHtml).join("");
    }

    // Espace DIGIY
    render(CONFIG.cards.digiy_market,   "cardsDigiyMarket");
    render(CONFIG.cards.digiy_terrain,  "cardsDigiyTerrain");
    render(CONFIG.cards.digiy_explore,  "cardsDigiyExplore");
    render(CONFIG.cards.digiy_transport,"cardsDigiyTransport");

    // Espace PRO
    render(CONFIG.cards.pro_terrain, "cardsProTerrain");
    render(CONFIG.cards.pro_market,  "cardsProMarket");
    render(CONFIG.cards.pro_docs,    "cardsProDocs");
    render(CONFIG.cards.pro_ecosys,  "cardsProEcosys");

    // D√©sactive clic si "bient√¥t" (propre)
    document.body.addEventListener("click", (e)=>{
      const a = e.target.closest("a[data-disabled='1']");
      if(!a) return;
      e.preventDefault();
      a.innerHTML = "‚è≥ <span class='tag'>Bient√¥t</span>";
      setTimeout(()=>{ a.innerHTML = "‚û°Ô∏è <span class='tag'>Voir</span>"; }, 900);
    });

    // =========================
    // ‚úÖ TABS (DIGIY / PRO)
    // =========================
    const tabDigiy = document.getElementById("tabDigiy");
    const tabPro   = document.getElementById("tabPro");
    const spaceDigiy = document.getElementById("spaceDigiy");
    const spacePro   = document.getElementById("spacePro");

    function setTab(which){
      const isDigiy = (which === "digiy");
      tabDigiy.setAttribute("aria-selected", isDigiy ? "true" : "false");
      tabPro.setAttribute("aria-selected",   isDigiy ? "false" : "true");
      spaceDigiy.style.display = isDigiy ? "" : "none";
      spacePro.style.display   = isDigiy ? "none" : "";
      // mini persistance
      try{ localStorage.setItem("digiy_hub_space", which); }catch(_){}
    }

    tabDigiy.addEventListener("click", ()=>setTab("digiy"));
    tabPro.addEventListener("click",   ()=>setTab("pro"));

    // charge dernier choix
    try{
      const saved = localStorage.getItem("digiy_hub_space");
      if(saved === "pro") setTab("pro");
    }catch(_){}

    // Petit bonus UX: si on a un slug => on favorise PRO
    if(ctx.slug){
      try{
        const saved = localStorage.getItem("digiy_hub_space");
        if(!saved) setTab("pro");
      }catch(_){}
    }

    // Bonus: si d√©j√† sur commencer-a-payer, grise le bouton
    if (location.href.includes("commencer-a-payer")) {
      const pay = document.getElementById("fabPay");
      pay.style.opacity = ".55";
      pay.style.pointerEvents = "none";
    }
  })();
  </script>
</body>
</html>
