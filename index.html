<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <meta name="theme-color" content="#061b14"/>
  <title>DIGIY QR FACTORY ‚Äî Slug ‚Üí QR + Liens</title>

  <style>
    :root{
      --bg:#061b14;
      --card:#0b2a1f;
      --line:rgba(255,255,255,.12);
      --text:#eafff1;
      --muted:rgba(234,255,241,.7);
      --gold:#facc15;
      --green:#22c55e;
      --red:#ef4444;
      --radius:18px;
    }

    *{box-sizing:border-box;margin:0;padding:0}
    body{
      font-family:system-ui,-apple-system,sans-serif;
      background:var(--bg);
      color:var(--text);
      padding:22px;
    }

    h1{
      font-size:22px;
      font-weight:950;
      margin-bottom:6px;
      color:var(--gold);
    }

    p{color:var(--muted);margin-bottom:14px;line-height:1.45}

    .box{
      background:rgba(255,255,255,.04);
      border:1px solid var(--line);
      border-radius:var(--radius);
      padding:16px;
      margin-bottom:12px;
    }

    input{
      width:100%;
      padding:12px;
      border-radius:14px;
      border:1px solid var(--line);
      outline:none;
      font-size:15px;
      background:rgba(255,255,255,.06);
      color:var(--text);
      margin-top:8px;
    }

    .rowBtns{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:10px;
      margin-top:12px;
    }
    @media(max-width:560px){
      .rowBtns{grid-template-columns:1fr}
    }

    button{
      width:100%;
      padding:12px;
      border:none;
      border-radius:14px;
      font-weight:950;
      cursor:pointer;
      background:linear-gradient(135deg,var(--gold),#fde68a);
      color:#111;
    }
    button.secondary{
      background:rgba(255,255,255,.08);
      color:var(--text);
      border:1px solid var(--line);
    }
    button:active{transform:translateY(1px)}

    .list{
      display:grid;
      gap:12px;
      margin-top:14px;
    }

    .item{
      padding:14px;
      border-radius:16px;
      background:rgba(255,255,255,.03);
      border:1px solid var(--line);
    }

    .top{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:10px;
    }

    .name{font-weight:950}
    .tag{font-size:12px;color:var(--muted);margin-top:2px}

    .link{
      margin-top:10px;
      font-size:13px;
      word-break:break-all;
      color:#fff;
      opacity:.95;
    }

    .actions{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      justify-content:flex-end;
      align-items:center;
      min-width:150px;
    }

    .btnMini{
      border:1px solid var(--line);
      background:rgba(255,255,255,.08);
      color:var(--text);
      padding:8px 10px;
      border-radius:12px;
      cursor:pointer;
      font-weight:850;
      font-size:12px;
    }
    .btnMini:hover{border-color:rgba(250,204,21,.55)}
  </style>
</head>

<body>

  <h1>‚ôæÔ∏è DIGIY QR FACTORY</h1>
  <p>Slug ‚Üí liens (HUB / CAISSE / LOC / RESTO / TEMP‚Ä¶).<br>
     Astuce : pour √©viter les 404, la version SAFE de Temp√©rature utilise un fichier <strong>sans accent</strong> : <code>temperature-business.html</code>.
  </p>

  <div class="box">
    <div><strong>Slug :</strong></div>
    <input id="slugInput" placeholder="ex: chez-astou-saly" />

    <div class="rowBtns">
      <button id="btnGen" type="button">‚ö° G√©n√©rer</button>
      <button id="btnCopyAll" class="secondary" type="button">üìã Copier tous les liens</button>
    </div>
  </div>

  <div class="list" id="results"></div>

<script>
/* ===============================
   DIGIY QR FACTORY ‚Äî FULL CLEAN
   ‚úÖ Temp√©rature Business SAFE + Legacy
   ‚úÖ Ouvrir / Copier / Copier Tous
================================ */

const BASE = {
  hub:         "https://beauville.github.io/digiy-hub/",
  caisse:      "https://beauville.github.io/Digiy-caisse-pro/index.html",
  espacePro:   "https://beauville.github.io/espace-pro/",
  espaceClient:"https://beauville.github.io/digiy-espace-client/",
  loc:         "https://beauville.github.io/digiy-loc/",
  resto:       "https://beauville.github.io/digiy-resto/",
  resa:        "https://beauville.github.io/digiy-resa-table/",
  notable:     "https://beauville.github.io/digiy-notable/",

  // ‚úÖ TEMP√âRATURE ‚Äî RECOMMAND√â (sans accent)
  temperature: "https://beauville.github.io/digiy-hub/temperature-business.html",

  // ‚úÖ TEMP√âRATURE ‚Äî LEGACY (si tu gardes l‚Äôancien nom)
  temperatureLegacy: "https://beauville.github.io/digiy-hub/Temp%C3%A9rature-Business.html"
};

const LABELS = {
  hub: "DIGIY HUB ‚Äî ENTR√âE ‚Ä¢ COCKPIT",
  caisse: "DIGIY CAISSE PRO ‚Äî POS ‚Ä¢ PRO",
  espacePro: "ESPACE PRO ‚Äî PORTAIL ‚Ä¢ OUTILS",
  espaceClient: "ESPACE CLIENT ‚Äî COMPTE ‚Ä¢ SUIVI",
  loc: "DIGIY LOC ‚Äî LOCATION",
  resto: "DIGIY RESTO ‚Äî RESTAURANT",
  resa: "RESA TABLE ‚Äî R√âSERVATIONS",
  notable: "DIGIY NOTABLE ‚Äî VISIBILIT√â",

  temperature: "TEMP√âRATURE BUSINESS ‚Äî KPI SWARM (SAFE)",
  temperatureLegacy: "TEMP√âRATURE BUSINESS ‚Äî KPI SWARM (LEGACY)"
};

function cleanSlug(raw){
  return String(raw||"")
    .trim()
    .toLowerCase()
    .replace(/\s+/g,"-")
    .replace(/[^a-z0-9\-]/g,"");
}

function buildUrl(base, slug){
  const u = new URL(base);
  u.searchParams.set("slug", slug);
  return u.toString();
}

function qrPng(url){
  // PNG QR direct (simple, propre)
  const api = new URL("https://api.qrserver.com/v1/create-qr-code/");
  api.searchParams.set("size","320x320");
  api.searchParams.set("data", url);
  return api.toString();
}

async function copyText(txt){
  try{
    await navigator.clipboard.writeText(txt);
    alert("‚úÖ Copi√© !");
  }catch{
    alert("‚ö†Ô∏è Copie impossible (permissions).");
  }
}

function render(slug){
  const wrap = document.getElementById("results");
  wrap.innerHTML = "";

  const keys = Object.keys(BASE);

  keys.forEach((key)=>{
    const url = buildUrl(BASE[key], slug);
    const qr  = qrPng(url);

    const div = document.createElement("div");
    div.className="item";

    div.innerHTML = `
      <div class="top">
        <div>
          <div class="name">${LABELS[key] || key}</div>
          <div class="tag">${key.toUpperCase()}</div>
        </div>
        <div class="actions">
          <button class="btnMini open" type="button">Ouvrir</button>
          <button class="btnMini copy" type="button">Copier</button>
          <button class="btnMini qr" type="button">QR / PNG</button>
        </div>
      </div>
      <div class="link">${url}</div>
    `;

    div.querySelector(".open").onclick = ()=>window.open(url, "_blank", "noopener");
    div.querySelector(".copy").onclick = ()=>copyText(url);
    div.querySelector(".qr").onclick  = ()=>window.open(qr, "_blank", "noopener");

    wrap.appendChild(div);
  });
}

function getAllLinks(slug){
  return Object.keys(BASE)
    .map((k)=>`${LABELS[k] || k}\n${buildUrl(BASE[k], slug)}`)
    .join("\n\n");
}

document.getElementById("btnGen").onclick = ()=>{
  const slug = cleanSlug(document.getElementById("slugInput").value);
  if(!slug){
    alert("‚ö†Ô∏è Mets un slug fr√©rot !");
    return;
  }
  render(slug);
};

document.getElementById("btnCopyAll").onclick = ()=>{
  const slug = cleanSlug(document.getElementById("slugInput").value);
  if(!slug){
    alert("‚ö†Ô∏è Mets un slug d‚Äôabord fr√©rot !");
    return;
  }
  copyText(getAllLinks(slug));
};

// Auto test Chez Astou
document.getElementById("slugInput").value="chez-astou-saly";
render("chez-astou-saly");

</script>

</body>
</html>
